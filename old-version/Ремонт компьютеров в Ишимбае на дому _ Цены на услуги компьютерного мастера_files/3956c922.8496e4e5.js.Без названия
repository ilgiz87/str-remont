"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[28814],{335700:(t,e,i)=>{i.r(e),i.d(e,{UIGallery:()=>u,UI_GALLERY_CLASSNAME:()=>h.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>h.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>h.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>c});var o=i(558137),l=i(898848),n=i(939646),r=i(972332),_=i(593159),a=i(754866),h=i(15614);const d=(0,o.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function c(t){const e=(0,a.domData)((0,a.ge)(t),"gallery-id");return e&&d().galleries[e]}class u{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,a.getSize)(this._el)[0]),this._itemWidth=(0,a.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,r.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,a.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,a.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,a.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,a.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,r.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,r.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,r.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,r.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,r.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,r.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){let e;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;e=-t.deltaY}else{if(!this._opts.scrollX)return;e=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;e=t.wheelDeltaY}else if(void 0!==t.wheelDelta)e=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;e=-t.detail}e=this._scroll.rtlSame?-e:e,Math.abs(e)>=120&&(e=74*Math.max(-1,Math.min(1,e))),this._innerCont.scrollLeft-=e,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,r.cancelEvent)(t)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const t=this._width-2*this._arrowWidth,e=this._itemFullWidth>t;return{isItemBiggerThanWidth:e,scrollDistance:e?this._itemFullWidth:t}}_legacySlide(t,e,i){const{scrollDistance:o,isItemBiggerThanWidth:l}=this._getScrollParams();let _=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*o;const h=this._innerCont.scrollWidth-this._width;this._scroll.negative?(_=Math.min(_,0),_=Math.abs(_)):_=Math.max(0,_),_=Math.min(h,_);const d=this._scroll.negative||this._scroll.rtlSame?-t:t;if(d>0&&_<h){_=Math.floor(_/this._itemFullWidth)*this._itemFullWidth}else if(d<0&&_>0){_=(l?Math.ceil(_/this._itemFullWidth):Math.floor(_/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(_=(this._visible.left+t)*this._itemFullWidth),0===_||_===h){const e=this._innerCont.scrollWidth;(0,a.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),_&&(_+=t*(this._innerCont.scrollWidth-e))}this._scroll.negative&&(_=-_),(0,n.animate)(this._innerCont,{scrollLeft:_},{duration:Math.abs(this._innerCont.scrollLeft-_)+50,transition:n.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(_),setTimeout((()=>(0,a.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,r.cancelEvent)(e)}_updateShift(t){let e=this._shift+t;const i=this._inner.scrollWidth-this._inner.clientWidth;e>i&&(e=i),e<0&&(e=0),this._shift=e}_slide(t,e,i){const{scrollDistance:o}=this._getScrollParams();this._updateShift(t*o),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,r.cancelEvent)(e)}_checkItemsAfterScroll(t,e){if(this._scroll.negative&&(t=Math.abs(t)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const i=this._itemWidth/3,o=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,l=t&&Math.floor(o/this._itemFullWidth),n=l*this._itemFullWidth+2*i;let r;r=this._scroll.backward?t+this._width<this._inner.scrollWidth-n:t>n;const h=Math.min(this._items.length-1,Math.floor((o+this._width)/this._itemFullWidth)),d=h*this._itemFullWidth+2*i;let c;if(c=this._scroll.backward?t>this._inner.scrollWidth-d:t+this._width<d,this._opts.onViewItem){const t=r?Math.min(this._items.length-1,l+1):l,i=c?Math.max(0,h-1):h;if(e||t!==this._visible.left||i!==this._visible.right){for(let o=t;o<=i;o++)(this._visible.left<0||e&&!(0,_.inArray)(this._items[o],this._visible.items)||o<this._visible.left||o>this._visible.right)&&this._opts.onViewItem(this._items[o],o);this._visible.left=t,this._visible.right=i,this._visible.items=this._items.slice(t,i+1)}}this._opts.markOutside&&(e?((0,a.geByClass)("ui_gallery_item_outside",this._inner).forEach((t=>{(0,a.removeClass)(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((l!==this._outside.left||!r)&&this._outside.left>=0&&((0,a.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(h!==this._outside.right||!c)&&this._outside.right>=0&&((0,a.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),r&&l!==this._outside.left&&((0,a.addClass)(this._items[l],"ui_gallery_item_outside"),this._outside.left=l),c&&h!==this._outside.right&&((0,a.addClass)(this._items[h],"ui_gallery_item_outside"),this._outside.right=h))}if(!this._opts.noArrows){const e=t>0,i=t+this._width<this._inner.scrollWidth;(0,a.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?i:e),(0,a.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?e:i)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}}_onArrowMouseOver(t){this._inner.classList.add(`ui_gallery__inner_shift_${t}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,e){t=t||[],this.addItems(t),this._finised=!!e||!t.length,this._loadingMore=!1}addItems(t,e){if((t=t||[]).length){const i=e>=0&&e<this._items.length?this._items[e]:null;t.forEach((t=>{i?(0,a.domInsertBefore)(t,i):this._inner.appendChild(t)})),this.refresh()}}destroy(){(0,r.removeEvent)(this._innerCont),(0,r.removeEvent)(this._leftArrow),(0,r.removeEvent)(this._rightArrow),(0,a.domData)(this._el,"gallery-id",null),delete d().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,a.re)(this._el)}removeItem(t){return(0,l.isNumeric)(t)&&(t=this._items[t]),!(!t||!(0,_.inArray)(t,this._items))&&((0,a.re)(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,a.getSize)(this._el)[0]),this._items=(0,a.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(t){this._opts.isModernTransitionsEnabled?this._slide(t,void 0,{eventName:"bullet"}):this._legacySlide(t,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,e)=>[t,this._visible.left+e]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(t,e){if(!t)throw new Error("No element was provided for UIGallery");if(!(t=(0,a.ge)(t)).classList.contains(h.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const i=c(t);if(i)return i;this._opts=(0,_.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},e),this._id=d().incIndex,d().incIndex+=1,this._el=t,this._width=Math.round((0,a.getSize)(this._el)[0]),this._items=(0,a.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,a.getSize)(this._items[0])[0],this._itemOffset=(0,_.intval)((0,a.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,_.intval)((0,a.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,a.geByClass1)(h.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,a.geByClass1)(h.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){const e=(0,a.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),i=document.querySelector("#content");i?.appendChild(e);const o=e.scrollLeft;t.rtl=vk.rtl,t.backward=o>0,e.scrollLeft=1e3,t.delta=e.scrollLeft===o?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,(0,a.re)(e),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,a.domData)(this._el,"gallery-id",this._id),d().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},669563:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _web_legacy_ui_ui_actions_menu_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(392757),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(972332),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(754866),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(593159),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(672277),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(237625),_web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(586573);const uiActionsMenu={keyToggle:function(t,e){if(!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__.checkKeyboardEvent)(e))return!1;const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",t);i&&uiActionsMenu.toggle(i,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)(i,"shown"))},keyboardToggle:function(t,e,i){if(!(0,_web_legacy_ui_ui_actions_menu_utils__WEBPACK_IMPORTED_MODULE_0__.isKeyboardActivationEvent)(e))return!1;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",t);o&&uiActionsMenu.toggle(o,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)(o,"shown")),i?.preventKeyboardClickEvent&&e?.preventDefault?.()},toggle:function(el,s,options){const dummyMenu=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(el,"dummyMenu");dummyMenu&&(el=dummyMenu),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(el,"shown",s);const onhide=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(el,"onHide");if(onhide&&!el.classList.contains("shown"))try{eval(onhide)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_5__.logEvalError)(t,onhide)}if(options&&options.onToggle){const script=options.onToggle.replace("{isShow}",""+s);try{eval(script)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_5__.logEvalError)(t,script)}}const childWithAriaExpanded=el.querySelector("[aria-expanded]");childWithAriaExpanded&&childWithAriaExpanded.setAttribute("aria-expanded",s)},show:function(t,e,i){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer");o&&(clearTimeout(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",0));const l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"origMenu");if(l&&(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"hidetimer"))&&(clearTimeout(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",0)),i&&i.delay){cur.uiActionsMenuShowTimeout&&clearTimeout(cur.uiActionsMenuShowTimeout);const o=i.delay;return delete i.delay,void(cur.uiActionsMenuShowTimeout=setTimeout(uiActionsMenu.show.pbind(t,e,i),o))}if(cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout),i&&i.appendParentCls){let e,o,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.geByClass1)("_ui_menu",t);if(l){o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.appendParentCls,l),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",t);const n=Object.entries(i.wrapAttrs||{}).reduce(((t,[e,i])=>(t.push(`${e}="${i}"`),t)),[]).join(" "),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.se)(`<div class="${e.className} ui_actions_menu_dummy_wrap" onmouseover="uiActionsMenu.show(this);" onmouseout="uiActionsMenu.hide(this);" ${n}></div>`);if(r.appendChild(l),o.appendChild(r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"dummyMenu",r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"origMenu",t),t=r,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"top",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(l,"top"))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"left",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(l,"left"))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"right",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(l,"right"))),i.processHoverCls){const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.processHoverCls,e);(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__.addEvent)(t,"mouseover",_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass.pbind(o,"hover")),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__.addEvent)(t,"mouseout",_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass.pbind(o,"hover"))}}else t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"dummyMenu");const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"origMenu");l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.geByClass1)("_ui_menu",t),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",n),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.appendParentCls,l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.setStyle)(l,{display:"block"});const r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(o),_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(e),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"top"),h=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"left"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(l,"right"),c={top:_[1]-r[1]+a};d?c.right=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(o)[0]+r[0]-_[0]-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(e)[0]+d:c.left=_[0]-r[0]+h,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.setStyle)(l,c)}const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.geByClass1)("_ui_menu",t);if(i&&i.autopos&&n&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)(t,"shown")){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(t,"ui_actions_menu_left");const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(t)[1],o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(t)[1],l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(n)[1],r=i.dy||10,_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(n)[0];(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(t,"ui_actions_menu_top"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass)(t,"no_transition"),e+o+r+l>(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_4__.scrollGetY)()+(window.lastWindowHeight||0)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass)(t,"ui_actions_menu_top"),e-r-l<(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_4__.scrollGetY)()+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)("page_header_wrap")[1]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(t,"ui_actions_menu_top"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(t,"ui_actions_menu_left",_<0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(t,"no_transition")}i&&i.hasOwnProperty("alwaysTop")&&n&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)(t,"shown")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(t,"ui_actions_menu_top"),i.alwaysTop&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass)(t,"ui_actions_menu_top")),i&&i.scroll&&i.maxHeight&&(n.style.maxHeight=((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(i.maxHeight)||200)+"px",n.__uiScroll__||new _web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_6__.default(n)),uiActionsMenu.toggle(t,!0,i)},hide:function(t,e,i){cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout);let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidedelay");o?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidedelay",!1):o=200;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",setTimeout((function(){uiActionsMenu.toggle(t,!1,i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",0)}),o))},hideDelay:function(t,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidedelay",e)}},__WEBPACK_DEFAULT_EXPORT__=uiActionsMenu},203259:(t,e,i)=>{i.d(e,{default:()=>h});var o=i(754866),l=i(593159),n=i(972332),r=i(693488),_=i(669563),a=i(102088);const h=class{onScroll(){const t=(0,o.domPN)(this.box.bodyNode),e=this.moreEl,i=this.scrollNode,l=i.scrollHeight,n=i.scrollTop,r=i.offsetHeight||i.clientHeight;(0,o.toggleClass)(t,"olist_topsh",n>0),(0,o.toggleClass)(t,"olist_botsh",n+r<l),e&&e.offsetTop&&e.onclick&&n+r+200>=l&&e.onclick()}onMouseEvent(t){let e=t.originalTarget||t.target;if((0,o.hasClass)(e,"olist_item_wrap")||(e=(0,o.gpeByClass)("olist_item_wrap",e)),!e||e===document.body)return;if((0,o.hasClass)(e,"olist_item_loading"))return(0,n.cancelEvent)(t);if((0,n.checkEvent)(t))return!0;this.box.changed=!0;const i=e.id.match(/-?\d+/)[0],l=!this.invertedSelection&&this.selected[i]||this.invertedSelection&&!this.selected[i];if((0,o.toggleClass)(e,"olist_item_wrap_on",!l),this.selected[i]=!l||this.invertedSelection,this.selCnt+=!l||this.invertedSelection?1:-1,this.selTabUpdate(),this.onListClick&&this.onListClick(e,l),this.scrollNode.scrollTop<50){const t=this.filter;setTimeout((()=>(0,o.elfocus)(t)),100)}return(0,n.cancelEvent)(t)}onOlistSelect(t,e){_.default.toggle(this.olistFilter,!1);let i=this.selCnt,o=this.selected;switch(e.ctrlKey||e.metaKey||e.shiftKey||(o={},i=0),t){case"all":o={},i=0,(0,l.each)(this.owners,(function(){o[this[0]]=1,i++}));break;case"none":o={},i=0;break;case"people":(0,l.each)(this.owners,(function(){this[0]>0&&!o[this[0]]&&(o[this[0]]=1,i++)}));break;case"groups":(0,l.each)(this.owners,(function(){this[0]<0&&!o[this[0]]&&(o[this[0]]=1,i++)}));break;default:const e=1<<(0,l.intval)(t.replace("list",""));(0,l.each)(this.owners,(function(){this[4]&e&&!o[this[0]]&&(o[this[0]]=1,i++)}))}return this.selCnt=i,this.selected=o,this.selTabUpdate(),this.renderList(),!1}onOlistFilters(t,e){_.default.show(t,e);const i=e=>{_.default.toggle(t,!1),(0,n.removeEvent)(document,"mousedown",i)};return(0,n.addEvent)(document,"mousedown",i),e&&(0,n.cancelEvent)(e)}selTabUpdate(){if(this.isAlbumEdit)return void(this.onTabUpdate&&this.onTabUpdate());if(!this.tabs)return;const t=this.selCnt,e=this.owners.length-t,i=(0,o.geByClass1)("olist_tab_sel",this.tabs),l=(0,o.geByClass1)("olist_tab_unsel",this.tabs);(0,o.val)((0,o.geByClass1)("ui_tab_count",i),t||""),(0,o.val)((0,o.geByClass1)("ui_tab_count",l),e||""),this.onTabUpdate&&this.onTabUpdate()}renderList(t,e,i){e=e||0,i=i||this.sel;const r=e?60:120,_=this;t&&(t=t.replace(/\u2013|\u2014/g,"-"));let h=t?this.indexer.search(t):this.owners;_.unsortedIndex==i&&_.getUnsorted&&(h=_.getUnsorted(h));const d=this.selected,c=_.invertedSelection?!(this.sel<0):this.sel<0,u=_.tpl;if(i&&_.unsortedIndex!=i){const t=[];(0,l.each)(h,(function(){const i=this[_.idIndex];if((!c&&d[i]||c&&!d[i])&&(t.push(this),t.length>e+r))return!1})),h=t}const p=h.length;h=h.slice(e,e+r);let m,b=[];if(t){t=(0,l.clean)(t);let e=(0,l.escapeRE)(t);const i=(0,a.parseLatin)(t);null!=i&&(e=e+"|"+(0,l.escapeRE)(i)),m=new RegExp("(?![^&;]+;)(?!<[^<>]*)((\\(*)("+e+"))(?![^<>]*>)(?![^&;]+;)","gi")}const g=_.rsTpl?_.rsTpl:function(t,e,i,o,l){const n=!i&&o[t[0]]||i&&!o[t[0]];let r=t[1];if(e){r=-1==e.indexOf(" ")?r.split(" "):[r];let t="";for(const e in r)r.hasOwnProperty(e)&&(t+=(e>0?" ":"")+r[e].replace(l,"$2<em>$3</em>"));r=t}return{id:t[0],name:r,photo:t[2],classname:n?" olist_item_wrap_on":"",link:t[3]||(t[0]>0?"id"+t[0]:"club"+-t[0])}};(0,l.each)(h,(function(){b.push((0,o.rs)(u,g(this,t,_.invertedSelection,d,m)))})),e||b.length||b.push('<div class="no_rows">'+(t?(0,a.getLang)("global_search_not_found").replace("{search}",t):_.noSelMsg)+"</div>"),(0,o.re)(this.moreEl),b=b.join(" "),e?this.olistEl.appendChild((0,o.cf)(b)):(0,o.val)(this.olistEl,b),p>e+r&&(this.olistEl.appendChild(this.moreEl),this.moreEl.onclick=function(i){return _.renderList(t,e+r),(0,n.cancelEvent)(i)}),_.box&&_.box.scroll&&_.box.scroll.update(!1,!0),_.onScroll()}constructor(t,e,i,_){0===i.length&&(i={}),_=_||{},this.indexer=new vkIndexer(e,_.getName?_.getName:function(t){let e=t[1];if(_.nameClass){const t=(0,o.se)(e);t&&(e=(0,o.val)((0,o.geByClass1)(_.nameClass,t))||e)}return e}),this.owners=e,this.tpl=_.tpl,this.rsTpl=_.rsTpl,this.idIndex=_.idIndex||0,this.selected=i,this.getUnsorted=_.getUnsorted,this.unsortedIndex=_.unsortedIndex||0,this.box=t,this.filter=_.filter,_.onTabUpdate&&(this.onTabUpdate=_.onTabUpdate),_.onListClick&&(this.onListClick=_.onListClick);const h=this;t.setButtons((0,a.getLang)("global_save"),(function(i){const o={},n=[],r=[];(0,l.each)(e,(function(){!h.invertedSelection&&h.selected[this[h.idIndex]]||h.invertedSelection&&!h.selected[this[h.idIndex]]?(o[this[h.idIndex]]=this,n.push(this[h.idIndex])):r.push(this[h.idIndex])})),!1!==cur.onOListSave(n,r,o,_.ret||{},i)&&t.hide(200)}),(0,a.getLang)("global_cancel")),_.box_options&&t.setOptions(_.box_options),this.scrollNode=(0,o.geByClass1)("privacy_olist",t.bodyNode),this.moreEl=(0,o.geByClass1)("olist_more",t.bodyNode,"a"),this.olistEl=(0,o.geByClass1)("olist",t.bodyNode,"div"),this.olistFilter=(0,o.ge)("olist_filter_actions"),this.sel=_.sel||0,this.tabs=(0,o.geByClass1)("ui_tabs",t.bodyNode),this.noSelMsg=_.noSelMsg||(0,a.getLang)("friends_no_user_selected"),this.invertedSelection=!1;const d=(0,o.geByClass1)("olist_tab_sel",this.tabs);this.selCnt=(0,l.intval)((0,o.val)((0,o.geByClass1)("ui_tab_count",d)));const c=this.filter?this.filter:this.filter=(0,o.ge)("olist_filter");setTimeout((()=>(0,o.elfocus)(c)),100),this.moreEl&&((0,o.isVisible)(this.moreEl)?this.moreEl.onclick=function(t){return h.renderList("",60),(0,n.cancelEvent)(t)}:((0,o.re)(this.moreEl),(0,o.show)(this.moreEl))),(0,n.addEvent)(this.olistEl,"click",this.onMouseEvent.bind(this)),(0,n.addEvent)(this.scrollNode,"scroll",this.onScroll.bind(this));const u=h.sel?h.sel>0?"sel":"unsel":"all";let p=(0,o.geByClass1)("olist_tab_"+u,h.tabs);p=p&&(0,o.geByClass1)("ui_tab",p),(cur.onOListTabChange=function(t,e){t&&r.default.switchTab(t),void 0===e&&(e=void 0===h.selPrev?0:h.selPrev),h.selPrev=h.sel,h.sel=e,h.renderList((0,o.val)(c),0,e),setTimeout((()=>(0,o.elfocus)(c)),100)})(p,h.sel),cur.onOlistChange=h.renderList.bind(this),cur.onOlistSelect=h.onOlistSelect.bind(this),cur.onOlistFilters=h.onOlistFilters.bind(this)}}},586573:(t,e,i)=>{i.r(e),i.d(e,{UiScroll:()=>d,default:()=>c});var o=i(575753),l=i(898848),n=i(593159),r=i(754866),_=i(972332),a=i(939646),h=i(97639);class d{init(){if(this.options.stopScrollPropagation&&this.fixBlocker(),!this.inited){if(!this.el.container.scrollWidth||this.disabled)return;this.fixSize(!0),this.options.autoresize&&this.startResizeListening(),this.options.global||cur.destroy.push(this.destroy.bind(this)),this.inited=!0}return this.update(!0),this.api}addEvent(t,e,i,o){return this.removeEvents.push([t,e,i]),(0,_.addEvent)(t,e,i,void 0,void 0,o?{passive:!0}:void 0),i}destroy(){if(this.disabled=!0,this.fixSize(),this.animation&&this.animation.stop(),this.moreTimeout&&clearTimeout(this.moreTimeout),this.dragstopHandler&&(0,_.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,_.removeEvent)(document,"mousemove",this.dragHandler),(0,n.each)(this.removeEvents,(function(t,e){_.removeEvent.apply(null,e)})),this.el.overflow.parentNode==this.el.container){const t=(0,r.cf)();for(;this.el.content.firstChild;)t.appendChild(this.el.content.firstChild);this.el.container.appendChild(t)}return(0,r.removeData)(this.el.container,"ui-scroll"),this.el.container.className=this.el.container.className.replace(/\bui_scroll_.+?\b/g," "),(0,n.each)(this.removeElements,(function(t,e){(0,r.re)(e)})),this.el.container.scrollTop=this.api.data.scrollTop,delete this.el.container.__uiScroll__,this.api}updateAbove(t){if((0,n.isFunction)(t)){this.animation&&this.animation.stop();const e=this.el.outer.scrollHeight-this.el.outer.scrollTop-this.el.overflow.offsetHeight;t(),this.el.outer.scrollTop=this.el.outer.scrollHeight-this.el.overflow.offsetHeight-e}return this.api}updateBelow(t){if((0,n.isFunction)(t)){this.animation&&this.animation.stop();const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;t(),e&&this.scrollBottom(!1)}return this.api}fixBlocker(){o.browser.chrome&&!this.options.noForceReFlow&&this.forceReFlow(),this.el.blocker.scrollTop=this.blockerScrollTop}forceReFlow(){this.el.blocker.style.display="inline-block",this.el.blocker.offsetHeight,this.el.blocker.style.display=""}fixSize(t){this.options.native||(t&&null==this.fixSizeDefault&&(this.fixSizeDefault=this.el.container.style.width),(0,r.setStyle)(this.el.container,"width",t?(0,r.getSize)(this.el.container,!0)[0]||this.fixSizeDefault||"":this.fixSizeDefault||""))}emitEvent(t){this.disabled||this.inited&&this.emitter.emitEvent(t,[this.api])}static scrollEventDelta(t){let e=0;const i=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;return"wheel"==t.type?e=t.deltaY:void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*-t.wheelDeltaY,o.browser.mac&&o.browser.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*-t.wheelDelta:t.detail&&2===t.axis&&(e=t.detail),e*(1==i?15:2==i?450:1)}isScrollEventUnused(t){return d.scrollEventDelta(t)>0?!this.api.data.scrollBottom:!this.api.data.scrollTop}resize(t){if(!t&&this.options.preserveEdgeBelow){const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;this.update(!0)&&(this.emitEvent("resize"),e&&this.scrollBottom(),this.options.stopScrollPropagation&&!t&&this.fixBlocker())}else this.update(!0)&&(this.options.stopScrollPropagation&&!t&&this.fixBlocker(),this.emitEvent("resize"))}disable(t){return this.disabled=!!t,t?(this.animation&&this.animation.stop(),this.fixSize()):(this.fixSize(!0),this.options.stopScrollPropagation&&this.fixBlocker(),this.update(!0)),(0,r.toggleClass)(this.el.container,"ui_scroll_disabled",this.disabled),this.api}dragstart(t){if(!(this.disabled||this.dragging||this.options.native))return t||(t=window.event),this.dragging=!0,this.animation&&this.animation.stop(),this.options.reversed&&(this.noMore=!0),(0,_.addEvent)(document,"mouseup contextmenu",this.dragstartHandler=this.dragstop.bind(this)),(0,_.addEvent)(document,"mousemove",this.dragHandler=this.drag.bind(this)),this.dragScroll=this.options.reversed?this.api.data.scrollBottom:this.api.data.scrollTop,this.dragY=t.screenY,(0,_.cancelEvent)(t),this.emitEvent("dragstart"),this.api}dragstop(t){if(!this.disabled&&this.dragging&&!this.options.native){if(t||(t=window.event),this.dragging=!1,this.dragstopHandler&&(0,_.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,_.removeEvent)(document,"mousemove",this.dragHandler),(0,r.setStyle)(document.body,"cursor",""),(0,r.removeClass)(this.el.container,"ui_scroll_dragging"),this.dragged)this.noMore&&(this.noMore=!1,this.more());else{this.options.reversed&&(this.noMore=!0);const e=(t.pageY-(0,r.getXY)(this.el.barOuter)[1]-this.barInnerHeight/2)*(Math.max(this.options.minContentHeight,this.api.data.scrollHeight)-this.api.data.viewportHeight)/(this.barOuterHeight-this.barInnerHeight);this.scrollTop(!1,e,0,function(){this.noMore&&(this.noMore=!1,this.more())}.bind(this))}return this.dragged=!1,t&&"contextmenu"!==t.type&&(0,_.cancelEvent)(t),this.emitEvent("dragstop"),this.api}}drag(t){if(this.disabled||!this.dragging||this.options.native)return;t||(t=window.event);const e=(t.screenY-this.dragY)*(this.api.data.scrollHeight/this.el.barOuter.scrollHeight);return this.el.outer.scrollTop=this.options.reversed?this.el.outer.scrollHeight-this.el.overflow.offsetHeight-this.dragScroll+e:this.dragScroll+e,this.dragged||(this.dragged=!0,(0,r.setStyle)(document.body,"cursor","pointer"),(0,r.addClass)(this.el.container,"ui_scroll_dragging")),(0,_.cancelEvent)(t),this.emitEvent("drag"),this.api}scroll(t,e,i){return this.animation&&this.animation.stop(),this.el.outer.scrollTop==t&&this.update(!0),e?(e="number"!=typeof e||!isFinite(e)||e%1?300:Math.abs(e),this.animation=new a.Fx.Base({scrollTop:this.el.outer.scrollTop},{transition:a.Fx.Transitions.easeOutCubic,onStep:function(t){this.el.outer.scrollTop=t.scrollTop}.bind(this),duration:e,onComplete:(0,n.isFunction)(i)?i.pbind(this.api):void 0}).start({scrollTop:this.el.outer.scrollTop},{scrollTop:t})):(this.el.outer.scrollTop=t,(0,n.isFunction)(i)&&i(this.api)),this.api}scrollTop(t,e,i,o){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll((0,n.intval)(e),i,o)}scrollBottom(t,e,i,o){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollHeight-this.el.overflow.offsetHeight-(0,n.intval)(e),i,o)}scrollBy(t,e,i){if(!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollTop+(0,n.intval)(t),e,i)}scrollIntoView(t,e,i,o){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),(e=(0,h.getScrollElement)(e))&&e.compareDocumentPosition&&e.compareDocumentPosition(this.el.content)&Node.DOCUMENT_POSITION_CONTAINS){const t=(0,r.getXY)(e)[1],l=(0,r.getXY)(this.el.overflow)[1],_=(0,r.getSize)(e)[1];if(t<=l&&t+_>=l+this.api.data.viewportHeight||t>=l&&t+_<=l+this.api.data.viewportHeight)(0,n.isFunction)(o)&&(i?setTimeout(o.bind(this.api),0):o(this.api));else if(_>this.api.data.viewportHeight||t<l)this.scrollTop(!1,t-l+this.api.data.scrollTop-(this.options.shadows?(0,r.getSize)(this.el.shadowTop)[1]:0),i,o);else{const e=this.options.shadows?(0,r.getSize)(this.el.shadowBottom)[1]:0;this.scrollTop(!1,t-l+this.api.data.scrollTop+_-this.api.data.viewportHeight+e,i,o)}}return this.api}update(t){let e,i;this.el.container&&!this.el.container.updateScroll&&(this.el.container.updateScroll=this.update.bind(this,!1));const o=this.el.outer.scrollTop;if(this.inited&&!this.disabled&&(t&&(e=this.el.inner.offsetHeight,this.api.data.viewportHeight!==(this.api.data.viewportHeight=this.el.overflow.offsetHeight)||this.api.data.scrollHeight!==e)||this.api.data.scrollTop!==o)){if(t&&(this.api.data.scrollHeight=e),this.api.data.scrollTop=Math.max(0,Math.min(this.api.data.scrollHeight-this.api.data.viewportHeight,Math.max(0,o))),this.api.data.scrollBottom=Math.max(0,this.api.data.scrollHeight-this.api.data.scrollTop-this.api.data.viewportHeight),!this.options.native){if(e=Math.max(this.options.minContentHeight,this.api.data.scrollHeight),i=e<=this.api.data.viewportHeight,!i){const i=this.el.barOuter.offsetHeight;(t||this.barOuterHeight!==i)&&(this.barOuterHeight=i,this.barInnerHeight=Math.max(this.options.barMinHeight,this.barOuterHeight*this.api.data.viewportHeight/e),this.el.barInner.style.height=this.barInnerHeight+"px"),(0,h.nextFrame)((()=>{const t=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight);this.el.barInner.style.transform=`translateY(${t}px)`}))}this.options.shadows&&(this.shadowTop!=(this.api.data.scrollTop&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_top_visible",this.shadowTop=this.api.data.scrollTop&&!i),this.shadowBottom!=(this.api.data.scrollBottom&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_bottom_visible",this.shadowBottom=this.api.data.scrollBottom&&!i)),this.unnecessary!==i&&((0,r.toggleClass)(this.el.container,"ui_scroll_unnecessary",i),this.unnecessary=i,this.options.stopScrollPropagation&&this.fixBlocker(),i&&this.barInnerHeight&&this.barOuterHeight&&(0,h.nextFrame)(function(t){this.el.barInner.style.height=100*this.barInnerHeight/this.barOuterHeight+"%";const i=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight)*100/this.barInnerHeight;this.el.barInner.style.transform=`translateY(${i}%)`}.bind(this)))}return this.emitEvent("update"),(!this.options.reversed||o>=0)&&this.more(),!0}return!1}more(){const t=this.options.reversed?this.api.data.scrollTop:this.api.data.scrollBottom,e=null!==this.options.onmoreThreshold?this.options.onmoreThreshold:2*this.api.data.viewportHeight;!this.noMore&&t<=e&&this.emitEvent("more")}constructor(t,e){if(!(t=(0,h.getScrollElement)(t)))throw new Error("uiScroll container is undefined");t.__uiScroll__&&t.__uiScroll__.destroy(),this.options=(0,n.extend)({global:!1,native:!1,theme:"default",reversed:!1,autoresize:!0,preserveEdgeBelow:!1,barMinHeight:30,preserveEdgeBelowThreshold:20,stopScrollPropagation:!0,stopScrollPropagationAlways:!1,minContentHeight:0,onmoreThreshold:null,hidden:!1,shadows:!1,scrollElements:[],onresize:null,onscroll:null,onscrollstart:null,onscrollstop:null,ondrag:null,ondragstart:null,ondragstop:null,onupdate:null,onmore:null,noForceReFlow:!1},e),this.options.native&&(this.options.shadows=!1),o.browser.mobile&&(this.options.stopScrollPropagation=!1),(0,l.isArray)(this.options.scrollElements)||(this.options.scrollElements=[]),this.removeEvents=[],this.removeElements=[],this.dragging=!1,this.dragged=!1,this.released=!0,this.noMore=!1,this.dragY=null,this.dragScroll=null,this.shadowTop=!1,this.shadowBottom=!1,this.unnecessary=!1,this.disabled=!1,this.stopped=!0,this.stoppedTimeout=null,this.fixSizeDefault=null,this.animation=null,this.barOuterHeight=null,this.barInnerHeight=null,this.currentFrame=null,this.blockerScrollTop=500,this.emitter=new EventEmitter,(0,n.isFunction)(this.options.onresize)&&this.emitter.addListener("resize",this.options.onresize),(0,n.isFunction)(this.options.onscroll)&&this.emitter.addListener("scroll",this.options.onscroll),(0,n.isFunction)(this.options.onscrollstart)&&this.emitter.addListener("scrollstart",this.options.onscrollstart),(0,n.isFunction)(this.options.onscrollstop)&&this.emitter.addListener("scrollstop",this.options.onscrollstop),(0,n.isFunction)(this.options.ondrag)&&this.emitter.addListener("drag",this.options.ondrag),(0,n.isFunction)(this.options.ondragstart)&&this.emitter.addListener("dragstart",this.options.ondragstart),(0,n.isFunction)(this.options.ondragstop)&&this.emitter.addListener("dragstop",this.options.ondragstop),(0,n.isFunction)(this.options.onupdate)&&this.emitter.addListener("update",this.options.onupdate),(0,n.isFunction)(this.options.onmore)&&this.emitter.addListener("more",this.options.onmore),this.el={container:t,overflow:(0,r.ce)("div",{className:"ui_scroll_overflow"}),outer:(0,r.ce)("div",{className:"ui_scroll_outer"},{margin:this.options.stopScrollPropagation?this.blockerScrollTop+"px 0":void 0}),inner:(0,r.ce)("div",{className:"ui_scroll_inner tt_noappend"}),shadowTop:(0,r.ce)("div",{className:"ui_scroll_shadow_top"}),shadowBottom:(0,r.ce)("div",{className:"ui_scroll_shadow_bottom"}),content:(0,r.ce)("div",{className:"ui_scroll_content clear_fix"}),barContainer:(0,r.ce)("div",{className:"ui_scroll_bar_container"}),barOuter:(0,r.ce)("div",{className:"ui_scroll_bar_outer"}),barInner:(0,r.ce)("div",{className:"ui_scroll_bar_inner"})},(0,r.data)(this.el.container,"ui-scroll",this);const i=(0,r.cf)(),a=["ui_scroll_container"];for((0,n.each)((0,l.isArray)(this.options.theme)?this.options.theme:(0,n.trim)(this.options.theme+"").split(/\s+/),(function(t,e){e&&a.push("ui_scroll_"+e+"_theme")})),(0,r.addClass)(this.el.container,a.join(" ")),this.options.hidden&&(0,r.addClass)(this.el.container,"ui_scroll_hidden");this.el.container.firstChild;)this.el.content.appendChild(this.el.container.firstChild);if(this.el.outer.appendChild(this.el.inner),this.el.inner.appendChild(this.el.content),this.options.stopScrollPropagation?(this.el.blocker=(0,r.ce)("div",{className:"ui_scroll_blocker"}),this.addEvent(this.el.blocker,"scroll",this.fixBlocker.bind(this),!0),this.el.blocker.appendChild(this.el.outer),this.el.overflow.appendChild(this.el.blocker)):this.el.overflow.appendChild(this.el.outer),i.appendChild(this.el.overflow),this.options.native?(0,r.addClass)(this.el.container,"ui_scroll_native"):(this.el.barOuter.appendChild(this.el.barInner),this.el.barContainer.appendChild(this.el.barOuter),i.appendChild(this.el.barContainer),this.options.shadows&&(this.el.overflow.appendChild(this.el.shadowTop),this.el.overflow.appendChild(this.el.shadowBottom)),o.browser.mobile||this.options.scrollElements.push(this.el.barContainer)),this.options.autoresize){const t=(0,h.addResizeSensor)(this.el.inner,this.resize.bind(this,!0)),e=(0,h.addResizeSensor)(this.el.overflow,this.resize.bind(this,!1));this.removeElements.push(t[0]),this.removeElements.push(e[0]),this.startResizeListening=function(){t[1](),e[1]()}}this.removeElements.push(this.el.overflow,this.el.barContainer),this.el.container.appendChild(i),this.options.reversed&&(this.el.outer.scrollTop=this.el.outer.scrollHeight),this.el.container.__uiScroll__=this.api={container:this.el.container,scroller:this.el.outer,content:this.el.content,emitter:this.emitter,ondragstart:this.dragstart.bind(this),ondragstop:this.dragstop.bind(this),ondrag:this.drag.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this,!0),enable:this.disable.bind(this,!1),scrollTop:this.scrollTop.bind(this,!0),scrollBottom:this.scrollBottom.bind(this,!0),scrollBy:this.scrollBy.bind(this),scrollIntoView:this.scrollIntoView.bind(this,!0),update:this.init.bind(this),updateAbove:this.updateAbove.bind(this),updateBelow:this.updateBelow.bind(this),data:{scrollTop:null,scrollBottom:null,scrollHeight:null,viewportHeight:null}},this.init();const c="onwheel"in this.el.outer?"wheel":void 0!==document.onmousewheel?"mousewheel":o.browser.mozilla?"MozMousePixelScroll":"DOMMouseScroll";return this.addEvent(this.el.container,c,function(t){this.animation&&this.animation.stop(),!this.disabled&&this.options.stopScrollPropagation&&(this.unnecessary?this.options.stopScrollPropagationAlways&&(0,_.cancelEvent)(t):this.isScrollEventUnused(t)?(0,_.cancelEvent)(t):(0,_.stopEvent)(t))}.bind(this),!this.options.stopScrollPropagation),this.options.native||this.addEvent(this.el.barContainer,"mousedown",this.dragstart.bind(this)),(0,n.each)(this.options.scrollElements,function(t,e){this.addEvent(e,c,function(t){this.disabled||this.unnecessary||(this.scrollBy(d.scrollEventDelta(t)),!this.options.stopScrollPropagation&&this.isScrollEventUnused(t)||(0,_.cancelEvent)(t))}.bind(this))}.bind(this)),this.options.reversed&&this.addEvent(this.el.container,"mousedown touchstart pointerdown",function(t){this.released=!1,this.noMore=!0;const e=this.addEvent(document,"mouseup contextmenu touchend pointerup",function(t){(0,_.removeEvent)(document,"mouseup contextmenu touchend pointerup",e),this.released=!0,this.noMore&&this.stopped&&!this.dragging&&(this.noMore=!1,this.more())}.bind(this))}.bind(this)),this.addEvent(this.el.outer,"scroll",function(){this.update()&&(this.stopped?(this.stopped=!1,this.emitEvent("scrollstart")):this.options.native||!1!==this.stopped||(this.stopped=0,(0,r.addClass)(this.el.container,"ui_scroll_scrolled")),this.emitEvent("scroll"),this.stoppedTimeout&&clearTimeout(this.stoppedTimeout),this.stoppedTimeout=setTimeout(function(){this.stopped||(this.stopped=!0,this.options.native||(0,r.removeClass)(this.el.container,"ui_scroll_scrolled"),this.emitEvent("scrollstop"),this.noMore&&this.released&&!this.dragging&&(this.noMore=!1,this.more()))}.bind(this),200))}.bind(this)),this.api}}d.addResizeSensor=h.addResizeSensor;const c=d},97639:(t,e,i)=>{i.d(e,{addResizeSensor:()=>c,getScrollElement:()=>d,nextFrame:()=>h});var o=i(593159),l=i(754866),n=i(575753);let r;const _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setTimeout(t,1)),a=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;function h(t){r&&a(r),r=_(t)}function d(t){return(0,o.isString)(t)&&"_"===t[0]?(0,l.geByClass1)(t):(0,l.ge)(t)}function c(t,e){if((t=d(t))&&(0,o.isFunction)(e)){if(n.browser.msie9||n.browser.opera&&n.browser.version<13){let i=!1,r=!1;const _=(0,l.ce)("object",{type:"text/html",className:"ui_scroll_resize_object",data:"about:blank",onload:function(){r=!0,i&&a()}});function a(){if(!_.contentDocument)return setTimeout(a,100);_.contentDocument.defaultView.removeEventListener("resize",e),_.contentDocument.defaultView.addEventListener("resize",e),e()}return t.appendChild(_),t.__resizeSensor__=[_,function(){i=!0,r&&a()}]}{const h=(0,l.ce)("div",{className:"ui_scroll_resize_sensor"}),c=(0,l.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_expand"}),u=(0,l.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_shrink"}),p=(0,l.ce)("div"),m=(0,l.ce)("div");let b=null;return c.appendChild(p),u.appendChild(m),h.appendChild(c),h.appendChild(u),t.appendChild(h),t.__resizeSensor__=[h,c.onscroll=u.onscroll=function(){const i=(t.offsetWidth||1e4)+10,o=(t.offsetHeight||1e4)+10;p.style.width=i+"px",p.style.height=o+"px",c.scrollLeft=i,c.scrollTop=o,u.scrollLeft=i,u.scrollTop=o,b!==(b=i+" "+o)&&e()}]}}}},693488:(t,e,i)=>{i.d(e,{default:()=>c});var o=i(754866),l=i(593159),n=i(575753),r=i(972332),_=i(740342),a=i(335700),h=i(342018);const d={initTabs:function(t,e,i=!0){if(n.browser.msie&&(0,l.intval)(n.browser.version)<10)return;if(n.browser.opera&&(0,l.intval)(n.browser.version)<15)return;if((0,o.hasClass)(t,"ui_tabs_sliding"))return;const r=(0,o.getSize)(e)[0],_=e.offsetLeft,a=(0,o.geByClass1)("_ui_tabs_slider",t);if(a&&!(0,o.domData)(t,"inited")){const t={width:r+"px",marginLeft:_};(0,o.setStyle)(a,t)}i&&d.tryInitTabsScroll(t)},tryInitTabsScroll:function(t){const e=t.querySelector(".js-tabs-scroll:not(.js-tabs-scroll-inited)");if(!e)return;e.classList.add("js-tabs-scroll-inited");const i=new a.UIGallery(e,{scrollY:!1}),o=(0,_.debounce)((()=>{i.refresh()}),200);window.addEventListener("resize",o),(0,h.pushNavDestroy)((()=>{i.destroy(),window.removeEventListener("resize",o)}))},tryInit:function(t,e=!0){if((0,o.domData)(t,"inited"))return;const i=(0,o.geByClass1)("ui_tab_group_sel",t)||(0,o.geByClass1)("ui_tab_sel",t);i&&d.initTabs(t,i,e),(0,o.domData)(t,"inited",1)},goTab:function(t,e,i,l=!1){if((0,r.checkEvent)(e))return!0;const n=(0,o.gpeByClass)("ui_tabs",t);return!(!i&&(0,o.geByClass1)("ui_tab_sel",n)==t)&&(d.switchTab(t),d.showProgress(n),nav.go(t,e,{tab:t,noframe:l}))},switchTab:function(t,e){let i=(0,o.gpeByClass)("ui_tabs",t);const n=(0,o.geByClass1)("ui_tab_sel",i);let r=null,_=null;const a=(0,o.hasClass)(n,"ui_tab_group_item")?_=(0,o.gpeByClass)("ui_tab_group",n):n,h=(0,o.hasClass)(t,"ui_tab_group_item")?r=(0,o.gpeByClass)("ui_tab_group",t):t;if(t!=n){if(t!=h&&(d.toggleGroup(h,!1),d.resetLabel(h,t)),a){d.initTabs(i,a),e=e||{};const t=(0,o.geByClass1)("_ui_tabs_slider",i);if(t){e.noAnim||h===a||((0,o.addClass)(i,"ui_tabs_sliding"),clearTimeout(cur.tabSlidingTO),cur.tabSlidingTO=setTimeout(o.removeClass.pbind(i,"ui_tabs_sliding"),300));const n=(0,l.intval)(t.style.marginLeft),r={width:(0,o.getSize)(h)[0]+"px"};r[cssTransformProp]="translateX("+(h.offsetLeft-n)+"px)",(0,o.setStyle)(t,r)}n!=a&&h!=a&&d.resetLabel(a),a!=n&&(0,o.removeClass)(a,"ui_tab_group_sel"),(0,o.removeClass)(n,"ui_tab_sel"),"tab"===(0,o.attr)(n,"role")&&(0,o.attr)(n,"aria-selected","false")}if(h!=t&&(0,o.addClass)(h,"ui_tab_group_sel"),(0,o.addClass)(t,"ui_tab_sel"),_&&(0,o.removeClass)(_,"ui_tab_hide_separator"),"tab"===(0,o.attr)(t,"role")&&(0,o.attr)(t,"aria-selected","true"),r){i=(0,o.geByClass1)("ui_tab_group_items",r,"div").children;let t=null;(0,l.each)(i,(function(e,i){"SPAN"===i.tagName?t=i:(0,o.hasClass)((0,o.domFC)(i),"ui_tab_sel")||(0,o.hasClass)(i,"unshown")||(t=null)})),t&&(0,o.addClass)(r,"ui_tab_hide_separator")}}return!1},resetLabel:function(t,e){const i=(0,o.geByClass1)("ui_tab_group_label",t,"span");i&&(i.innerHTML=(e||i).getAttribute("data-default-label"))},toggleGroup:function(t,e){const i=(0,o.data)(t,"visibletimer");i&&clearTimeout(i),(0,o.data)(t,"visibletimer",setTimeout(o.toggleClass.pbind(t,"visible",e),e?0:100)),(0,o.toggleClass)(t,"shown",e)},showGroup:function(t){const e=(0,o.data)(t,"hidetimer");e&&(clearTimeout(e),(0,o.data)(t,"hidetimer",0)),d.toggleGroup(t,!0)},hideGroup:function(t){(0,o.data)(t,"hidetimer")||(0,o.data)(t,"hidetimer",setTimeout((function(){d.toggleGroup(t,!1),(0,o.data)(t,"hidetimer",0)}),200))},showProgress:function(t){(0,o.hasClass)(t,"ui_tabs")||(t=(0,o.gpeByClass)("ui_tabs",t)),(0,o.addClass)(t,"ui_tabs_loading")},hideProgress:function(t){(0,o.hasClass)(t,"ui_tabs")||(t=(0,o.gpeByClass)("ui_tabs",t)),(0,o.removeClass)(t,"ui_tabs_loading")},showSearch:function(t,e){if(cur.viewAsBox)return cur.viewAsBox();if((0,r.checkEvent)(e))return!0;const i=(0,o.gpeByClass)("ui_tabs",t),l=(0,o.domByClass)(i,"_field");return(0,o.addClass)(i,"ui_tabs_search_opened"),uiSearch.focus(l),!1},hideSearch:function(t,e){if((0,r.checkEvent)(e))return!0;const i=(0,o.gpeByClass)("ui_tabs",t);return(0,o.removeClass)(i,"ui_tabs_search_opened"),!1},scrollToActiveTab(t){const e=document.querySelector(`#${t}`);if(!e)return;const i=e.querySelector(".ui_tab_sel, .ui_tab_group_sel"),o=e.querySelector(`.${a.UI_GALLERY_CONTENT_CLASSNAME}`);if(!i||!o)return;const l=i.offsetLeft,n=l+i.offsetWidth,r=o.scrollLeft,_=o.clientWidth,h=r+_,d=l-20,c=n+20;d<r?o.scrollTo({left:d}):c>h&&o.scrollTo({left:c-_})},showSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.remove("ui_tab_search_wrap_hidden")},hideSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.add("ui_tab_search_wrap_hidden")}},c=d},392757:(t,e,i)=>{i.d(e,{isKeyboardActivationEvent:()=>l});var o=i(972332);const l=t=>!!(window.KeyboardEvent&&t instanceof window.KeyboardEvent)&&(!(t.ctrlKey||t.altKey||t.metaKey)&&!![o.KEY.ENTER,o.KEY.SPACE].includes(t.keyCode))}}]);try{stManager?.done("dist/web/chunks/3956c922.8496e4e5.js")}catch(t){}